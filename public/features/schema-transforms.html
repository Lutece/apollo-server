<!DOCTYPE html>
<html lang="en">
  <head><meta name="generator" content="Hexo 3.8.0">
    <meta charset="utf-8">

    
      <!-- Google Tag Manager -->
      <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
      new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
      j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
      'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
      })(window,document,'script','dataLayer','GTM-PNFDVBB');</script>
      <!-- End Google Tag Manager -->
    

    <!-- Basic -->
    <title>Schema transforms | Apollo Server</title>
    <meta name="description" content="Automatically transforming schemas">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    
      <link rel="shortcut icon" type="image/png" href="../images/favicon-apollo.png" sizes="16x16 32x32 64x64">
    

    <!-- Social -->
    <meta property="og:type" content="article">
    <meta property="og:url" content="https://www.apollographql.com/docs/apollo-server">
    <meta property="og:title" content="Schema transforms | Apollo Server">
    <meta property="og:description" content="Automatically transforming schemas">
    <meta property="og:image" content="">
    <meta name="twitter:site" content="@apollographql">
    <meta name="twitter:title" content="Schema transforms | Apollo Server">
    <meta name="twitter:description" content="Automatically transforming schemas">
    <meta name="twitter:image" content="">

    <!-- Misc -->
    <meta name="google-site-verification" content="">

    
    
    <link href="//cdn.jsdelivr.net/npm/prismjs@1.15.0/themes/prism.min.css" rel="stylesheet" type="text/css">
    <link href="//cdn.jsdelivr.net/npm/prismjs@1.15.0/plugins/line-numbers/prism-line-numbers.min.css" rel="stylesheet" type="text/css">
    <link href="//cdn.jsdelivr.net/npm/prismjs@1.15.0/plugins/line-highlight/prism-line-highlight.css" rel="stylesheet" type="text/css">

    <link href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:400,300,200,300italic,400italic" rel="stylesheet" type="text/css">
    
      <link rel="stylesheet" href="../style/bundle-apollo.css">
    
    <link rel="stylesheet" type="text/css" href="//cdnjs.cloudflare.com/ajax/libs/cookieconsent2/3.0.3/cookieconsent.min.css">
  </head>
  <body class="">
    
      <!-- Google Tag Manager (noscript) -->
      <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-PNFDVBB" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
      <!-- End Google Tag Manager (noscript) -->
    
      

  <div class="nav sunset">
    <div class="nav-group left">
      <div class="nav-item mobile-button js-sidebar-toggle show-mobile">
        <span class="icon-menu"></span>
      </div>
      <div class="nav-item">
        
        <a class="logo-wrapper" href="https://www.apollographql.com/" title="Apollo ">
          <img src="../images/logo-apollo-space-left.svg" alt="Apollo" class="logo">
          
            <span></span>
          
        </a>
      </div>
    </div>


    
      <div class="nav-group right">
        <div id="nav-container" class="show-desktop"></div>
        <script src="https://apollographql-nav.netlify.com/index.js"></script>
        <script>ApolloNav.initNav({ theme: 'light' }, 'nav-container')</script>
      </div>
    
    </div>
  

  

<div class="sidebar charcoal">
  <div class="panel">
    
      <div id="sidebar-panel-nav"></div>
      <script>ApolloNav.initNav({ theme: 'light', id: 'mobile-nav' }, 'sidebar-panel-nav')</script>
    
  </div>

  <div class="sidebar-content">
    <div class="topcap">
      <span class="title-sidebar">Apollo Server</span>
      
        <span class="select version-sidebar nochrome">
          <select class="version-select">
            
              <option value="v2">2</option>
            
              <option value="v1">1</option>
            
          </select>
        </span>
      
    </div>

    
    <div class="wrapper-search">
      <div class="input-area">
        <div class="input-symbol small round">
          <input type="text" placeholder="Search Apollo Server" id="desktop-search-input">
          <span class="icon-search"></span>
        </div>
      </div>
      <div class="wrapper-desktop-search-results"></div>
    </div>

    

    <ul class="toc">
      

        <li>
          

          <ul class="list-toc">
            
              
              
              <li class="item-toc ">
                <a href="../." class="sidebar-link ">
                  <span>Introduction</span>
                </a>
              </li>
              
            
              
              
              <li class="item-toc ">
                <a href="../getting-started.html" class="sidebar-link ">
                  <span>Getting started</span>
                </a>
              </li>
              
            
              
              
              <li class="item-toc ">
                <a href="../whats-new.html" class="sidebar-link ">
                  <span>What's new?</span>
                </a>
              </li>
              
            
          </ul>
        </li>

        <hr>
      

        <li>
          
            <div class="heading-toc">Essentials</div>
          

          <ul class="list-toc">
            
              
              
              <li class="item-toc ">
                <a href="../essentials/schema.html" class="sidebar-link ">
                  <span>Writing a schema</span>
                </a>
              </li>
              
            
              
              
              <li class="item-toc ">
                <a href="../essentials/server.html" class="sidebar-link ">
                  <span>Building a server</span>
                </a>
              </li>
              
            
              
              
              <li class="item-toc ">
                <a href="../essentials/data.html" class="sidebar-link ">
                  <span>Fetching data with resolvers</span>
                </a>
              </li>
              
            
          </ul>
        </li>

        <hr>
      

        <li>
          
            <div class="heading-toc">Features</div>
          

          <ul class="list-toc">
            
              
              
              <li class="item-toc ">
                <a href="mocking.html" class="sidebar-link ">
                  <span>Mocking</span>
                </a>
              </li>
              
            
              
              
              <li class="item-toc ">
                <a href="errors.html" class="sidebar-link ">
                  <span>Error handling</span>
                </a>
              </li>
              
            
              
              
              <li class="item-toc ">
                <a href="data-sources.html" class="sidebar-link ">
                  <span>Data sources</span>
                </a>
              </li>
              
            
              
              
              <li class="item-toc ">
                <a href="subscriptions.html" class="sidebar-link ">
                  <span>Subscriptions</span>
                </a>
              </li>
              
            
              
              
              <li class="item-toc ">
                <a href="metrics.html" class="sidebar-link ">
                  <span>Monitoring and metrics</span>
                </a>
              </li>
              
            
              
              
              <li class="item-toc ">
                <a href="graphql-playground.html" class="sidebar-link ">
                  <span>GraphQL Playground</span>
                </a>
              </li>
              
            
              
              
              <li class="item-toc ">
                <a href="scalars-enums.html" class="sidebar-link ">
                  <span>Custom scalars and enums</span>
                </a>
              </li>
              
            
              
              
              <li class="item-toc ">
                <a href="unions-interfaces.html" class="sidebar-link ">
                  <span>Unions and interfaces</span>
                </a>
              </li>
              
            
              
              
              <li class="item-toc ">
                <a href="directives.html" class="sidebar-link ">
                  <span>Using schema directives</span>
                </a>
              </li>
              
            
              
              
              <li class="item-toc ">
                <a href="creating-directives.html" class="sidebar-link ">
                  <span>Implementing directives</span>
                </a>
              </li>
              
            
              
              
              <li class="item-toc ">
                <a href="authentication.html" class="sidebar-link ">
                  <span>Authentication</span>
                </a>
              </li>
              
            
              
              
              <li class="item-toc ">
                <a href="testing.html" class="sidebar-link ">
                  <span>Integration testing</span>
                </a>
              </li>
              
            
          </ul>
        </li>

        <hr>
      

        <li>
          
            <div class="heading-toc">Deployment</div>
          

          <ul class="list-toc">
            
              
              
              <li class="item-toc ">
                <a href="../deployment/heroku.html" class="sidebar-link ">
                  <span>Heroku</span>
                </a>
              </li>
              
            
              
              
              <li class="item-toc ">
                <a href="../deployment/lambda.html" class="sidebar-link ">
                  <span>Lambda</span>
                </a>
              </li>
              
            
              
              
              <li class="item-toc ">
                <a href="../deployment/now.html" class="sidebar-link ">
                  <span>Now</span>
                </a>
              </li>
              
            
          </ul>
        </li>

        <hr>
      

        <li>
          
            <div class="heading-toc">API Reference</div>
          

          <ul class="list-toc">
            
              
              
              <li class="item-toc ">
                <a href="../api/apollo-server.html" class="sidebar-link ">
                  <span>apollo-server</span>
                </a>
              </li>
              
            
              
              
              <li class="item-toc ">
                <a href="../api/graphql-tools.html" class="sidebar-link ">
                  <span>graphql-tools</span>
                </a>
              </li>
              
            
          </ul>
        </li>

        <hr>
      

        <li>
          
            <div class="heading-toc">Migration</div>
          

          <ul class="list-toc">
            
              
              
              <li class="item-toc ">
                <a href="../migration-two-dot.html" class="sidebar-link ">
                  <span>Migrating to v2.0</span>
                </a>
              </li>
              
            
              
              
              <li class="item-toc ">
                <a href="../migration-engine.html" class="sidebar-link ">
                  <span>Using Engine with v2.0</span>
                </a>
              </li>
              
            
              
              
              <li class="item-toc ">
                <a href="../migration-file-uploads.html" class="sidebar-link ">
                  <span>File uploads in Node.js < v8.5.0</span>
                </a>
              </li>
              
            
          </ul>
        </li>

        <hr>
      
    </ul>
  </div>
</div>

    <div class="content">

      <div class="header-content">
        <div class="header-wrapper">
          <div class="title-wrapper">
            <h1 class="title-page">
              Schema transforms
            </h1>
            
              <div class="subtitle-page">
                Automatically transforming schemas
              </div>
              
          </div>
        </div>
      </div>

      <div class="content-wrapper">
        <div class="document-formatting">
          <p>Schema transforms are a tool for making modified copies of <code>GraphQLSchema</code> objects, while preserving the possibility of delegating back to original schema.</p>
<p>Transforms are useful when working with <a href="./remote-schemas.html">remote schemas</a>, building GraphQL gateways that combine multiple schemas, and/or using <a href="./schema-stitching.html">schema stitching</a> to combine schemas together without conflicts between types or fields.</p>
<p>While it’s possible to modify a schema by hand, the manual approach requires a deep understanding of all the relationships between <code>GraphQLSchema</code> properties, which makes it error-prone and labor-intensive. Transforms provide a generic abstraction over all those details, which improves code quality and saves time, not only now but also in the future, because transforms are designed to be reused again and again.</p>
<p>Each <code>Transform</code> may define three different kinds of transform functions:</p>

<!-- Has Prism -->
<pre class="line-numbers" style=""><code class="language-ts">interface Transform = {
  transformSchema?: (schema: GraphQLSchema) =&gt; GraphQLSchema;
  transformRequest?: (request: Request) =&gt; Request;
  transformResult?: (result: Result) =&gt; Result;
};
</code></pre>
<p>The most commonly used transform function is <code>transformSchema</code>. However, some transforms require modifying incoming requests and/or outgoing results as well, especially if <code>transformSchema</code> adds or removes types or fields, since such changes require mapping new types/fields to the original types/fields at runtime.</p>
<p>For example, let’s consider changing the name of the type in a simple schema. Imagine we’ve written a function that takes a <code>GraphQLSchema</code> and replaces all instances of type <code>Test</code> with <code>NewTest</code>.</p>

<!-- Has Prism -->
<pre class="line-numbers" style=""><code class="language-graphql"># old schema
type Test {
  id: ID!
  name: String
}

type Query {
  returnTest: Test
}

# new schema

type NewTest {
  id: ID!
  name: String
}

type Query {
  returnTest: NewTest
}
</code></pre>
<p>At runtime, we want the <code>NewTest</code> type to be automatically mapped to the old <code>Test</code> type.</p>
<p>At first glance, it might seem as though most queries work the same way as before:</p>

<!-- Has Prism -->
<pre class="line-numbers" style=""><code class="language-graphql">query {
  returnTest {
    id
    name
  }
}
</code></pre>
<p>Since the fields of the type have not changed, delegating to the old schema is relatively easy here.</p>
<p>However, the new name begins to matter more when fragments and variables are used:</p>

<!-- Has Prism -->
<pre class="line-numbers" style=""><code class="language-graphql">query {
  returnTest {
    id
    ... on NewTest {
      name
    }
  }
}
</code></pre>
<p>Since the <code>NewTest</code> type did not exist on old schema, this fragment will not match anything in the old schema, so it will be filtered out during delegation.</p>
<p>What we need is a <code>transformRequest</code> function that knows how to rename any occurrences of <code>NewTest</code> to <code>Test</code> before delegating to the old schema.</p>
<p>By the same reasoning, we also need a <code>transformResult</code> function, because any results contain a <code>__typename</code> field whose value is <code>Test</code>, that name needs to be updated to <code>NewTest</code> in the final result.</p>
<h2 id="api">API</h2>

<h3 id="Transform">Transform</h3>


<!-- Has Prism -->
<pre class="line-numbers" style=""><code class="language-ts">interface Transform = {
  transformSchema?: (schema: GraphQLSchema) =&gt; GraphQLSchema;
  transformRequest?: (request: Request) =&gt; Request;
  transformResult?: (result: Result) =&gt; Result;
};

type Request = {
  document: DocumentNode;
  variables: Record&lt;string, any&gt;;
  extensions?: Record&lt;string, any&gt;;
};

type Result = ExecutionResult &amp; {
  extensions?: Record&lt;string, any&gt;;
};
</code></pre>
<h3 id="transformSchema">transformSchema</h3>

<p>Given a <code>GraphQLSchema</code> and an array of <code>Transform</code> objects, produce a new schema with those transforms applied.</p>
<p>Delegating resolvers will also be generated to map from new schema root fields to old schema root fields. Often these automatic resolvers are sufficient, so you don’t have to implement your own.</p>
<h2 id="built-in">Built-in transforms</h2>

<p>Built-in transforms are ready-made classes implementing the <code>Transform</code> interface. They are intended to cover many of the most common schema transformation use cases, but they also serve as examples of how to implement transforms for your own needs.</p>
<h3 id="Modifying-types"><a href="#Modifying-types" class="headerlink" title="Modifying types"></a>Modifying types</h3><ul>
<li><p><code>FilterTypes(filter: (type: GraphQLNamedType) =&gt; boolean)</code>: Remove all types for which the <code>filter</code> function returns <code>false</code>.</p>
</li>
<li><p><code>RenameTypes(renamer, options?)</code>: Rename types by applying <code>renamer</code> to each type name. If <code>renamer</code> returns <code>undefined</code>, the name will be left unchanged. Options controls whether built-in types and scalars are renamed. Root objects are never renamed by this transform.</p>
</li>
</ul>

<!-- Has Prism -->
<pre class="line-numbers" style=""><code class="language-ts">RenameTypes(
  (name: string) =&gt; string | void,
  options?: {
    renameBuiltins: Boolean;
    renameScalars: Boolean;
  },
)
</code></pre>
<h3 id="Modifying-root-fields"><a href="#Modifying-root-fields" class="headerlink" title="Modifying root fields"></a>Modifying root fields</h3><ul>
<li><code>TransformRootFields(transformer: RootTransformer)</code>: Given a transformer, abritrarily transform root fields. The <code>transformer</code> can return a <code>GraphQLFieldConfig</code> definition, a object with new <code>name</code> and a <code>field</code>, <code>null</code> to remove the field, or <code>undefined</code> to leave the field unchanged.</li>
</ul>

<!-- Has Prism -->
<pre class="line-numbers" style=""><code class="language-ts">TransformRootFields(transformer: RootTransformer)

type RootTransformer = (
  operation: &#39;Query&#39; | &#39;Mutation&#39; | &#39;Subscription&#39;,
  fieldName: string,
  field: GraphQLField&lt;any, any&gt;,
) =&gt;
  | GraphQLFieldConfig&lt;any, any&gt;
  | { name: string; field: GraphQLFieldConfig&lt;any, any&gt; }
  | null
  | void;
</code></pre>
<ul>
<li><code>FilterRootFields(filter: RootFilter)</code>: Like <code>FilterTypes</code>, removes root fields for which the <code>filter</code> function returns <code>false</code>.</li>
</ul>

<!-- Has Prism -->
<pre class="line-numbers" style=""><code class="language-ts">FilterRootFields(filter: RootFilter)

type RootFilter = (
  operation: &#39;Query&#39; | &#39;Mutation&#39; | &#39;Subscription&#39;,
  fieldName: string,
  field: GraphQLField&lt;any, any&gt;,
) =&gt; boolean;
</code></pre>
<ul>
<li><code>RenameRootFields(renamer)</code>: Rename root fields, by applying the <code>renamer</code> function to their names.</li>
</ul>

<!-- Has Prism -->
<pre class="line-numbers" style=""><code class="language-ts">RenameRootFields(
  renamer: (
    operation: &#39;Query&#39; | &#39;Mutation&#39; | &#39;Subscription&#39;,
    name: string,
    field: GraphQLField&lt;any, any&gt;,
  ) =&gt; string,
)
</code></pre>
<h3 id="Other"><a href="#Other" class="headerlink" title="Other"></a>Other</h3><ul>
<li><p><code>ExractField({ from: Array&lt;string&gt;, to: Array&lt;string&gt; })</code> - move selection at <code>from</code> path to <code>to</code> path.</p>
</li>
<li><p><code>WrapQuery(
  path: Array&lt;string&gt;,
  wrapper: QueryWrapper,
  extractor: (result: any) =&gt; any,
)</code> - wrap a selection at <code>path</code> using function <code>wrapper</code>. Apply <code>extractor</code> at the same path to get the result. This is used to get a result nested inside other result</p>
</li>
</ul>

<!-- Has Prism -->
<pre class="line-numbers" style=""><code class="language-js">transforms: [
  &#x2F;&#x2F; Wrap document takes a subtree as an AST node
  new WrapQuery(
    &#x2F;&#x2F; path at which to apply wrapping and extracting
    [&#39;userById&#39;],
    (subtree: SelectionSetNode) =&gt; ({
      &#x2F;&#x2F; we create a wrapping AST Field
      kind: Kind.FIELD,
      name: {
        kind: Kind.NAME,
        &#x2F;&#x2F; that field is `address`
        value: &#39;address&#39;,
      },
      &#x2F;&#x2F; Inside the field selection
      selectionSet: subtree,
    }),
    &#x2F;&#x2F; how to process the data result at path
    result =&gt; result &amp;&amp; result.address,
  ),
],
</code></pre>
<ul>
<li><code>ReplaceFieldWithFragment(targetSchema: GraphQLSchema, mapping: FieldToFragmentMapping)</code>: Replace the given fields with an inline fragment. Used by <code>mergeSchemas</code> to handle the <code>fragment</code> option.</li>
</ul>

<!-- Has Prism -->
<pre class="line-numbers" style=""><code class="language-ts">type FieldToFragmentMapping = {
  [typeName: string]: { [fieldName: string]: InlineFragmentNode };
};
</code></pre>
<h2 id="other-built-in">delegateToSchema transforms</h2>

<p>The following transforms are automatically applied by <code>delegateToSchema</code> during schema delegation, to translate between new and old types and fields:</p>
<ul>
<li><code>AddArgumentsAsVariables</code>: Given a schema and arguments passed to a root field, make those arguments document variables.</li>
<li><code>FilterToSchema</code>: Given a schema and document, remove all fields, variables and fragments for types that don’t exist in that schema.</li>
<li><code>AddTypenameToAbstract</code>: Add <code>__typename</code> to all abstract types in the document.</li>
<li><code>CheckResultAndHandleErrors</code>: Given a result from a subschema, propagate errors so that they match the correct subfield. Also provide the correct key if aliases are used.</li>
</ul>
<p>By passing a custom <code>transforms</code> array to <code>delegateToSchema</code>, it’s possible to run additional transforms before these default transforms, though it is currently not possible to disable the default transforms.</p>

        </div>
      </div>

      <div class="pagination">
        <div class="content-wrapper">
          
          
          
           
              <a class="link primary next" href="../index.html">
                <span class="subtitle-pagination">Next</span>
                Introduction
                  <span class="icon-arrow-right-alt"></span>
              </a>
           
          
        </div>
      </div>

      <div class="github">
        <a class="link tertiary " href="https://github.com/apollographql/apollo-server/tree/master/docs/source/features/schema-transforms.md" target="_blank">
          <span class="icon-github"></span>Edit on GitHub</a>
      </div>

      
    </div>

    
    <script type="text/javascript" src="//cdn.jsdelivr.net/npm/prismjs@1.15.0/prism.min.js"></script>
    <script type="text/javascript" src="//cdn.jsdelivr.net/npm/prismjs@1.15.0/plugins/line-numbers/prism-line-numbers.min.js"></script>
    <script type="text/javascript" src="//cdn.jsdelivr.net/npm/prismjs@1.15.0/plugins/line-highlight/prism-line-highlight.min.js"></script>
        <script type="text/javascript" src="//cdn.jsdelivr.net/combine/npm/prismjs@1.15.0/components/prism-bash.min.js,npm/prismjs@1.15.0/components/prism-graphql.min.js,npm/prismjs@1.15.0/components/prism-json.min.js,npm/prismjs@1.15.0/components/prism-jsx.min.js,npm/prismjs@1.15.0/components/prism-less.min.js,npm/prismjs@1.15.0/components/prism-swift.min.js,npm/prismjs@1.15.0/components/prism-typescript.min.js,npm/prismjs@1.15.0/components/prism-yaml.min.js"></script>

    <script type="text/javascript" src="//cdn.jsdelivr.net/npm/smooth-scroll@12.1.5/dist/js/smooth-scroll.min.js"></script>

    <script>
      // Used by the main.js script below.
      docsConfigRoot = '/docs/apollo-server/';
    </script>
    <script src="../script/main.js"></script>

    
      <script type="text/javascript" src="//cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.js"></script>
    
    <script type="text/javascript" src="//cdn.jsdelivr.net/fastclick/1.0.6/fastclick.min.js"></script>

    <script>
      // nectar ninja
      (function(){
        var handle = '@meteorjs';
        var a = document.createElement('script');
        var m = document.getElementsByTagName('script')[0];
        a.async = 1;
        a.src = 'https://nectar.ninja/api/v1/' + handle.slice(1);
        m.parentNode.insertBefore(a, m);
      })();
    </script>

    

    
      <script>
        
        var analytics;

        <!-- Segment.io -->
        !function(){var analytics=window.analytics=window.analytics||[];if(!analytics.initialize)if(analytics.invoked)window.console&&console.error&&console.error("Segment snippet included twice.");else{analytics.invoked=!0;analytics.methods=["trackSubmit","trackClick","trackLink","trackForm","pageview","identify","reset","group","track","ready","alias","debug","page","once","off","on"];analytics.factory=function(t){return function(){var e=Array.prototype.slice.call(arguments);e.unshift(t);analytics.push(e);return analytics}};for(var t=0;t<analytics.methods.length;t++){var e=analytics.methods[t];analytics[e]=analytics.factory(e)}analytics.load=function(t,e){var n=document.createElement("script");n.type="text/javascript";n.async=!0;n.src=("https:"===document.location.protocol?"https://":"http://")+"cdn.segment.com/analytics.js/v1/"+t+"/analytics.min.js";var o=document.getElementsByTagName("script")[0];o.parentNode.insertBefore(n,o);analytics._loadOptions=e};analytics.SNIPPET_VERSION="4.1.0";
        analytics.load("wgrIo8Bul0Ujl8USETG3DB6hONdy4kTg");
        analytics.page();
        }}();
      </script>
    

    // search box
    
      <script>
        ['desktop'].forEach(function(type) {
          var search = docsearch({
            apiKey: '768e823959d35bbd51e4b2439be13fb7',
            
            
            indexName: 'apollodata',
            inputSelector: '#' + type + '-search-input',
            autocompleteOptions: {
              dropdownMenuContainer: '.wrapper-' + type + '-search-results',
              debug: true
            },
            algoliaOptions: {
              hitsPerPage: 20
            }
          }).autocomplete;

          var sidebar = document.querySelector('.sidebar-content');
          search.on('autocomplete:opened', function() {
            sidebar.classList.add('searching');
          });
          search.on('autocomplete:closed', function() {
            sidebar.classList.remove('searching');
          });
          search.on('autocomplete:updated', function() {
            if (search.val() === '') {
              search.autocomplete.close();
            }
          });
        });
      </script>
    

    

    <script src="//cdnjs.cloudflare.com/ajax/libs/cookieconsent2/3.0.3/cookieconsent.min.js"></script>
    <script>
      window.addEventListener('load', function () {
        window.cookieconsent.initialise({
          palette: {
            popup: {
              background: '#555',
            },
            button: {
              text: '#333',
              background: '#CCC',
            },
          },
        })
      });
    </script>
  </body>
</html>
