<!DOCTYPE html>
<html lang="en">
  <head><meta name="generator" content="Hexo 3.8.0">
    <meta charset="utf-8">

    
      <!-- Google Tag Manager -->
      <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
      new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
      j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
      'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
      })(window,document,'script','dataLayer','GTM-PNFDVBB');</script>
      <!-- End Google Tag Manager -->
    

    <!-- Basic -->
    <title>Data sources | Apollo Server</title>
    <meta name="description" content="Caching Partial Query Results">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    
      <link rel="shortcut icon" type="image/png" href="../images/favicon-apollo.png" sizes="16x16 32x32 64x64">
    

    <!-- Social -->
    <meta property="og:type" content="article">
    <meta property="og:url" content="https://www.apollographql.com/docs/apollo-server">
    <meta property="og:title" content="Data sources | Apollo Server">
    <meta property="og:description" content="Caching Partial Query Results">
    <meta property="og:image" content="">
    <meta name="twitter:site" content="@apollographql">
    <meta name="twitter:title" content="Data sources | Apollo Server">
    <meta name="twitter:description" content="Caching Partial Query Results">
    <meta name="twitter:image" content="">

    <!-- Misc -->
    <meta name="google-site-verification" content="">

    
    
    <link href="//cdn.jsdelivr.net/npm/prismjs@1.15.0/themes/prism.min.css" rel="stylesheet" type="text/css">
    <link href="//cdn.jsdelivr.net/npm/prismjs@1.15.0/plugins/line-numbers/prism-line-numbers.min.css" rel="stylesheet" type="text/css">
    <link href="//cdn.jsdelivr.net/npm/prismjs@1.15.0/plugins/line-highlight/prism-line-highlight.css" rel="stylesheet" type="text/css">

    <link href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:400,300,200,300italic,400italic" rel="stylesheet" type="text/css">
    
      <link rel="stylesheet" href="../style/bundle-apollo.css">
    
    <link rel="stylesheet" type="text/css" href="//cdnjs.cloudflare.com/ajax/libs/cookieconsent2/3.0.3/cookieconsent.min.css">
  </head>
  <body class="">
    
      <!-- Google Tag Manager (noscript) -->
      <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-PNFDVBB" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
      <!-- End Google Tag Manager (noscript) -->
    
      

  <div class="nav sunset">
    <div class="nav-group left">
      <div class="nav-item mobile-button js-sidebar-toggle show-mobile">
        <span class="icon-menu"></span>
      </div>
      <div class="nav-item">
        
        <a class="logo-wrapper" href="https://www.apollographql.com/" title="Apollo ">
          <img src="../images/logo-apollo-space-left.svg" alt="Apollo" class="logo">
          
            <span></span>
          
        </a>
      </div>
    </div>


    
      <div class="nav-group right">
        <div id="nav-container" class="show-desktop"></div>
        <script src="https://apollographql-nav.netlify.com/index.js"></script>
        <script>ApolloNav.initNav({ theme: 'light' }, 'nav-container')</script>
      </div>
    
    </div>
  

  

<div class="sidebar charcoal">
  <div class="panel">
    
      <div id="sidebar-panel-nav"></div>
      <script>ApolloNav.initNav({ theme: 'light', id: 'mobile-nav' }, 'sidebar-panel-nav')</script>
    
  </div>

  <div class="sidebar-content">
    <div class="topcap">
      <span class="title-sidebar">Apollo Server</span>
      
        <span class="select version-sidebar nochrome">
          <select class="version-select">
            
              <option value="v2">2</option>
            
              <option value="v1">1</option>
            
          </select>
        </span>
      
    </div>

    
    <div class="wrapper-search">
      <div class="input-area">
        <div class="input-symbol small round">
          <input type="text" placeholder="Search Apollo Server" id="desktop-search-input">
          <span class="icon-search"></span>
        </div>
      </div>
      <div class="wrapper-desktop-search-results"></div>
    </div>

    

    <ul class="toc">
      

        <li>
          

          <ul class="list-toc">
            
              
              
              <li class="item-toc ">
                <a href="../." class="sidebar-link ">
                  <span>Introduction</span>
                </a>
              </li>
              
            
              
              
              <li class="item-toc ">
                <a href="../getting-started.html" class="sidebar-link ">
                  <span>Getting started</span>
                </a>
              </li>
              
            
              
              
              <li class="item-toc ">
                <a href="../whats-new.html" class="sidebar-link ">
                  <span>What's new?</span>
                </a>
              </li>
              
            
          </ul>
        </li>

        <hr>
      

        <li>
          
            <div class="heading-toc">Essentials</div>
          

          <ul class="list-toc">
            
              
              
              <li class="item-toc ">
                <a href="../essentials/schema.html" class="sidebar-link ">
                  <span>Writing a schema</span>
                </a>
              </li>
              
            
              
              
              <li class="item-toc ">
                <a href="../essentials/server.html" class="sidebar-link ">
                  <span>Building a server</span>
                </a>
              </li>
              
            
              
              
              <li class="item-toc ">
                <a href="../essentials/data.html" class="sidebar-link ">
                  <span>Fetching data with resolvers</span>
                </a>
              </li>
              
            
          </ul>
        </li>

        <hr>
      

        <li>
          
            <div class="heading-toc">Features</div>
          

          <ul class="list-toc">
            
              
              
              <li class="item-toc ">
                <a href="mocking.html" class="sidebar-link ">
                  <span>Mocking</span>
                </a>
              </li>
              
            
              
              
              <li class="item-toc ">
                <a href="errors.html" class="sidebar-link ">
                  <span>Error handling</span>
                </a>
              </li>
              
            
              
              
              <li class="item-toc current">
                <a href="" class="sidebar-link current">
                  <span>Data sources</span>
                </a>
              </li>
              
            
              
              
              <li class="item-toc ">
                <a href="subscriptions.html" class="sidebar-link ">
                  <span>Subscriptions</span>
                </a>
              </li>
              
            
              
              
              <li class="item-toc ">
                <a href="metrics.html" class="sidebar-link ">
                  <span>Monitoring and metrics</span>
                </a>
              </li>
              
            
              
              
              <li class="item-toc ">
                <a href="graphql-playground.html" class="sidebar-link ">
                  <span>GraphQL Playground</span>
                </a>
              </li>
              
            
              
              
              <li class="item-toc ">
                <a href="scalars-enums.html" class="sidebar-link ">
                  <span>Custom scalars and enums</span>
                </a>
              </li>
              
            
              
              
              <li class="item-toc ">
                <a href="unions-interfaces.html" class="sidebar-link ">
                  <span>Unions and interfaces</span>
                </a>
              </li>
              
            
              
              
              <li class="item-toc ">
                <a href="directives.html" class="sidebar-link ">
                  <span>Using schema directives</span>
                </a>
              </li>
              
            
              
              
              <li class="item-toc ">
                <a href="creating-directives.html" class="sidebar-link ">
                  <span>Implementing directives</span>
                </a>
              </li>
              
            
              
              
              <li class="item-toc ">
                <a href="authentication.html" class="sidebar-link ">
                  <span>Authentication</span>
                </a>
              </li>
              
            
              
              
              <li class="item-toc ">
                <a href="testing.html" class="sidebar-link ">
                  <span>Integration testing</span>
                </a>
              </li>
              
            
          </ul>
        </li>

        <hr>
      

        <li>
          
            <div class="heading-toc">Deployment</div>
          

          <ul class="list-toc">
            
              
              
              <li class="item-toc ">
                <a href="../deployment/heroku.html" class="sidebar-link ">
                  <span>Heroku</span>
                </a>
              </li>
              
            
              
              
              <li class="item-toc ">
                <a href="../deployment/lambda.html" class="sidebar-link ">
                  <span>Lambda</span>
                </a>
              </li>
              
            
              
              
              <li class="item-toc ">
                <a href="../deployment/now.html" class="sidebar-link ">
                  <span>Now</span>
                </a>
              </li>
              
            
          </ul>
        </li>

        <hr>
      

        <li>
          
            <div class="heading-toc">API Reference</div>
          

          <ul class="list-toc">
            
              
              
              <li class="item-toc ">
                <a href="../api/apollo-server.html" class="sidebar-link ">
                  <span>apollo-server</span>
                </a>
              </li>
              
            
              
              
              <li class="item-toc ">
                <a href="../api/graphql-tools.html" class="sidebar-link ">
                  <span>graphql-tools</span>
                </a>
              </li>
              
            
          </ul>
        </li>

        <hr>
      

        <li>
          
            <div class="heading-toc">Migration</div>
          

          <ul class="list-toc">
            
              
              
              <li class="item-toc ">
                <a href="../migration-two-dot.html" class="sidebar-link ">
                  <span>Migrating to v2.0</span>
                </a>
              </li>
              
            
              
              
              <li class="item-toc ">
                <a href="../migration-engine.html" class="sidebar-link ">
                  <span>Using Engine with v2.0</span>
                </a>
              </li>
              
            
              
              
              <li class="item-toc ">
                <a href="../migration-file-uploads.html" class="sidebar-link ">
                  <span>File uploads in Node.js < v8.5.0</span>
                </a>
              </li>
              
            
          </ul>
        </li>

        <hr>
      
    </ul>
  </div>
</div>

    <div class="content">

      <div class="header-content">
        <div class="header-wrapper">
          <div class="title-wrapper">
            <h1 class="title-page">
              Data sources
            </h1>
            
              <div class="subtitle-page">
                Caching Partial Query Results
              </div>
              
          </div>
        </div>
      </div>

      <div class="content-wrapper">
        <div class="document-formatting">
          <p>Data sources are classes that encapsulate fetching data from a particular service, with built-in support for caching, deduplication, and error handling. You write the code that is specific to interacting with your backend, and Apollo Server takes care of the rest.</p>
<h2 id="REST-Data-Source"><a href="#REST-Data-Source" class="headerlink" title="REST Data Source"></a>REST Data Source</h2><p>A <code>RESTDataSource</code> is responsible for fetching data from a given REST API.</p>
<p>To get started, install the REST data source package:</p>

<!-- Has Prism -->
<pre class="line-numbers" style=""><code class="language-bash">npm install apollo-datasource-rest
</code></pre>
<p>To define a data source, extend the <code>RESTDataSource</code> class and implement the data fetching methods that your resolvers require. Your implementation of these methods can call on convenience methods built into the <code>RESTDataSource</code> class to perform HTTP requests, while making it easy to build up query parameters, parse JSON results, and handle errors.</p>

<!-- Has Prism -->
<pre class="line-numbers" style=""><code class="language-js">const { RESTDataSource } = require(&#39;apollo-datasource-rest&#39;);

class MoviesAPI extends RESTDataSource {
  constructor() {
    super();
    this.baseURL = &#39;https:&#x2F;&#x2F;movies-api.example.com&#x2F;&#39;;
  }

  async getMovie(id) {
    return this.get(`movies&#x2F;${id}`);
  }

  async getMostViewedMovies(limit = 10) {
    const data = await this.get(&#39;movies&#39;, {
      per_page: limit,
      order_by: &#39;most_viewed&#39;,
    });
    return data.results;
  }
}
</code></pre>
<h3 id="HTTP-Methods"><a href="#HTTP-Methods" class="headerlink" title="HTTP Methods"></a>HTTP Methods</h3><p>The <code>get</code> method on the <code>RESTDataSource</code> makes an HTTP <code>GET</code> request. Similarly, there are methods built-in to allow for <code>POST</code>, <code>PUT</code>, <code>PATCH</code>, and <code>DELETE</code> requests.</p>

<!-- Has Prism -->
<pre class="line-numbers" style=""><code class="language-js">class MoviesAPI extends RESTDataSource {
  constructor() {
    super();
    this.baseURL = &#39;https:&#x2F;&#x2F;movies-api.example.com&#x2F;&#39;;
  }

  &#x2F;&#x2F; an example making an HTTP POST request
  async postMovie(movie) {
    return this.post(
      `movies`, &#x2F;&#x2F; path
      movie, &#x2F;&#x2F; request body
    );
  }

  &#x2F;&#x2F; an example making an HTTP PUT request
  async newMovie(movie) {
    return this.put(
      `movies`, &#x2F;&#x2F; path
      movie, &#x2F;&#x2F; request body
    );
  }

  &#x2F;&#x2F; an example making an HTTP PATCH request
  async updateMovie(movie) {
    return this.patch(
      `movies`, &#x2F;&#x2F; path
      { id: movie.id, movie }, &#x2F;&#x2F; request body
    );
  }

  &#x2F;&#x2F; an example making an HTTP DELETE request
  async deleteMovie(movie) {
    return this.delete(
      `movies&#x2F;${movie.id}`, &#x2F;&#x2F; path
    );
  }
}
</code></pre>
<p>All of the HTTP helper functions (<code>get</code>, <code>put</code>, <code>post</code>, <code>patch</code>, and <code>delete</code>) accept a third <code>options</code> parameter, which can be used to set things like headers and referrers. For more info on the options available, see MDN’s <a href="https://developer.mozilla.org/en-US/docs/Web/API/WindowOrWorkerGlobalScope/fetch#Parameters" target="_blank" rel="noopener">fetch docs</a>.</p>
<h3 id="Intercepting-fetches"><a href="#Intercepting-fetches" class="headerlink" title="Intercepting fetches"></a>Intercepting fetches</h3><p>Data sources allow you to intercept fetches to set headers, query parameters, or make other changes to the outgoing request. This is most often used for authorization or other common concerns that apply to all requests. Data sources also get access to the GraphQL context, which is a great place to store a user token or other information you need to have available.</p>
<p>You can easily set a header on every request:</p>

<!-- Has Prism -->
<pre class="line-numbers" style=""><code class="language-js">class PersonalizationAPI extends RESTDataSource {
  willSendRequest(request) {
    request.headers.set(&#39;Authorization&#39;, this.context.token);
  }
}
</code></pre>
<p>Or add a query parameter:</p>

<!-- Has Prism -->
<pre class="line-numbers" style=""><code class="language-js">class PersonalizationAPI extends RESTDataSource {
  willSendRequest(request) {
    request.params.set(&#39;api_key&#39;, this.context.token);
  }
}
</code></pre>
<p>If you’re using TypeScript, make sure to import the <code>RequestOptions</code> type:</p>

<!-- Has Prism -->
<pre class="line-numbers" style=""><code class="language-typescript">import { RESTDataSource, RequestOptions } from &#39;apollo-datasource-rest&#39;;

class PersonalizationAPI extends RESTDataSource {
  baseURL = &#39;https:&#x2F;&#x2F;personalization-api.example.com&#x2F;&#39;;

  willSendRequest(request: RequestOptions) {
    request.headers.set(&#39;Authorization&#39;, this.context.token);
  }
}
</code></pre>
<h3 id="Resolving-URLs-dynamically"><a href="#Resolving-URLs-dynamically" class="headerlink" title="Resolving URLs dynamically"></a>Resolving URLs dynamically</h3><p>In some cases, you’ll want to set the URL based on the environment or other contextual values. You can use a getter for this:</p>

<!-- Has Prism -->
<pre class="line-numbers" style=""><code class="language-js">get baseURL() {
  if (this.context.env === &#39;development&#39;) {
    return &#39;https:&#x2F;&#x2F;movies-api-dev.example.com&#x2F;&#39;;
  } else {
    return &#39;https:&#x2F;&#x2F;movies-api.example.com&#x2F;&#39;;
  }
}
</code></pre>
<p>If you need more customization, including the ability to resolve a URL asynchronously, you can also override <code>resolveURL</code>:</p>

<!-- Has Prism -->
<pre class="line-numbers" style=""><code class="language-js">async resolveURL(request: RequestOptions) {
  if (!this.baseURL) {
    const addresses = await resolveSrv(request.path.split(&quot;&#x2F;&quot;)[1] + &quot;.service.consul&quot;);
    this.baseURL = addresses[0];
  }
  return super.resolveURL(request);
}
</code></pre>
<h2 id="Accessing-data-sources-from-resolvers"><a href="#Accessing-data-sources-from-resolvers" class="headerlink" title="Accessing data sources from resolvers"></a>Accessing data sources from resolvers</h2><p>To give resolvers access to data sources, you pass them as options to the <code>ApolloServer</code> constructor:</p>

<!-- Has Prism -->
<pre class="line-numbers" style=""><code class="language-js">const server = new ApolloServer({
  typeDefs,
  resolvers,
  dataSources: () =&gt; {
    return {
      moviesAPI: new MoviesAPI(),
      personalizationAPI: new PersonalizationAPI(),
    };
  },
  context: () =&gt; {
    return {
      token: &#39;foo&#39;,
    };
  },
});
</code></pre>
<p>Apollo Server will put the data sources on the context for every request, so you can access them from your resolvers. It will also give your data sources access to the context. (The reason for not having users put data sources on the context directly is because that would lead to a circular dependency.)</p>
<p>From our resolvers, we can access the data source and return the result:</p>

<!-- Has Prism -->
<pre class="line-numbers" style=""><code class="language-js"> Query: {
    movie: async (_source, { id }, { dataSources }) =&gt; {
      return dataSources.moviesAPI.getMovie(id);
    },
    mostViewedMovies: async (_source, _args, { dataSources }) =&gt; {
      return dataSources.moviesAPI.getMostViewedMovies();
    },
    favorites: async (_source, _args, { dataSources }) =&gt; {
      return dataSources.personalizationAPI.getFavorites();
    },
  },
</code></pre>
<h2 id="What-about-DataLoader"><a href="#What-about-DataLoader" class="headerlink" title="What about DataLoader?"></a>What about DataLoader?</h2><p><a href="https://github.com/facebook/dataloader" target="_blank" rel="noopener">DataLoader</a> was designed by Facebook with a specific use case in mind: deduplicating and batching object loads from a data store. It provides a memoization cache, which avoids loading the same object multiple times during a single GraphQL request, and it coalesces loads that occur during a single tick of the event loop into a batched request that fetches multiple objects at once.</p>
<p>Although DataLoader is great for that use case, it’s less helpful when loading data from REST APIs because its primary feature is <em>batching</em>, not <em>caching</em>. What we’ve found to be far more important when layering GraphQL over REST APIs is having a resource cache that saves data across multiple GraphQL requests, can be shared across multiple GraphQL servers, and has cache management features like expiry and invalidation that leverage standard HTTP cache control headers.</p>
<h4 id="Batching"><a href="#Batching" class="headerlink" title="Batching"></a>Batching</h4><p>Most REST APIs don’t support batching, and if they do, using a batched endpoint may actually jeopardize caching. When you fetch data in a batch request, the response you receive is for the exact combination of resources you’re requesting. Unless you request that same combination again, future requests for the same resource won’t be served from cache.
Our recommendation is to restrict batching to requests that can’t be cached. In those cases, you can actually take advantage of DataLoader as a private implementation detail inside your data source.</p>

<!-- Has Prism -->
<pre class="line-numbers" style=""><code class="language-js">class PersonalizationAPI extends RESTDataSource {
  constructor() {
    super();
    this.baseURL = &#39;https:&#x2F;&#x2F;personalization-api.example.com&#x2F;&#39;;
  }

  willSendRequest(request) {
    request.headers.set(&#39;Authorization&#39;, this.context.token);
  }

  private progressLoader = new DataLoader(async (ids) =&gt; {
    const progressList = await this.get(&#39;progress&#39;, {
      ids: ids.join(&#39;,&#39;),
    });
    return ids.map(id =&gt;
      progressList.find((progress) =&gt; progress.id === id),
    );
  });

  async getProgressFor(id) {
    return this.progressLoader.load(id);
  }
</code></pre>
<h2 id="Using-Memcached-Redis-as-a-cache-storage-backend"><a href="#Using-Memcached-Redis-as-a-cache-storage-backend" class="headerlink" title="Using Memcached/Redis as a cache storage backend"></a>Using Memcached/Redis as a cache storage backend</h2><p>By default, resource caching will use an in-memory LRU cache. When running multiple server instances, you’ll want to use a shared cache backend instead. That’s why Apollo Server also includes support for using <a href="https://memcached.org/" target="_blank" rel="noopener">Memcached</a> or <a href="https://redis.io/" target="_blank" rel="noopener">Redis</a> as cache stores via the <a href="https://www.npmjs.com/package/apollo-server-cache-memcached" target="_blank" rel="noopener"><code>apollo-server-cache-memcached</code></a> and <a href="https://www.npmjs.com/package/apollo-server-cache-redis" target="_blank" rel="noopener"><code>apollo-server-cache-redis</code></a> packages. You can specify which one to use by creating an instance and passing it into the <code>ApolloServer</code> constructor:</p>

<!-- Has Prism -->
<pre class="line-numbers" style=""><code class="language-js">const { MemcachedCache } = require(&#39;apollo-server-cache-memcached&#39;);

const server = new ApolloServer({
  typeDefs,
  resolvers,
  cache: new MemcachedCache(
    [&#39;memcached-server-1&#39;, &#39;memcached-server-2&#39;, &#39;memcached-server-3&#39;],
    { retries: 10, retry: 10000 }, &#x2F;&#x2F; Options
  ),
  dataSources: () =&gt; ({
    moviesAPI: new MoviesAPI(),
  }),
});
</code></pre>
<p>For documentation of the options you can pass to the underlying Memcached client, look <a href="https://github.com/3rd-Eden/memcached" target="_blank" rel="noopener">here</a>.</p>

<!-- Has Prism -->
<pre class="line-numbers" style=""><code class="language-js">const { RedisCache } = require(&#39;apollo-server-cache-redis&#39;);

const server = new ApolloServer({
  typeDefs,
  resolvers,
  cache: new RedisCache({
    host: &#39;redis-server&#39;,
    &#x2F;&#x2F; Options are passed through to the Redis client
  }),
  dataSources: () =&gt; ({
    moviesAPI: new MoviesAPI(),
  }),
});
</code></pre>
<p>For documentation of the options you can pass to the underlying Redis client, look <a href="https://github.com/NodeRedis/node_redis" target="_blank" rel="noopener">here</a>.</p>
<h2 id="Implementing-your-own-cache-backend"><a href="#Implementing-your-own-cache-backend" class="headerlink" title="Implementing your own cache backend"></a>Implementing your own cache backend</h2><p>Apollo Server exposes a <code>KeyValueCache</code> interface that you can use to implement connectors to other data stores, or to optimize for the query characteristics of your application. More information can be found in the package readme for <a href="https://www.npmjs.com/package/apollo-server-caching" target="_blank" rel="noopener">apollo-server-caching</a>.</p>

        </div>
      </div>

      <div class="pagination">
        <div class="content-wrapper">
          
          
         
              <a class="link primary prev" href="errors.html">
                <span class="icon-arrow-left-alt"></span>
                <span class="subtitle-pagination">Previous</span>
                Error handling
              </a>
         
          
          
           
              <a class="link primary next" href="subscriptions.html">
                <span class="subtitle-pagination">Next</span>
                Subscriptions
                  <span class="icon-arrow-right-alt"></span>
              </a>
           
          
        </div>
      </div>

      <div class="github">
        <a class="link tertiary " href="https://github.com/apollographql/apollo-server/tree/master/docs/source/features/data-sources.md" target="_blank">
          <span class="icon-github"></span>Edit on GitHub</a>
      </div>

      
    </div>

    
    <script type="text/javascript" src="//cdn.jsdelivr.net/npm/prismjs@1.15.0/prism.min.js"></script>
    <script type="text/javascript" src="//cdn.jsdelivr.net/npm/prismjs@1.15.0/plugins/line-numbers/prism-line-numbers.min.js"></script>
    <script type="text/javascript" src="//cdn.jsdelivr.net/npm/prismjs@1.15.0/plugins/line-highlight/prism-line-highlight.min.js"></script>
        <script type="text/javascript" src="//cdn.jsdelivr.net/combine/npm/prismjs@1.15.0/components/prism-bash.min.js,npm/prismjs@1.15.0/components/prism-graphql.min.js,npm/prismjs@1.15.0/components/prism-json.min.js,npm/prismjs@1.15.0/components/prism-jsx.min.js,npm/prismjs@1.15.0/components/prism-less.min.js,npm/prismjs@1.15.0/components/prism-swift.min.js,npm/prismjs@1.15.0/components/prism-typescript.min.js,npm/prismjs@1.15.0/components/prism-yaml.min.js"></script>

    <script type="text/javascript" src="//cdn.jsdelivr.net/npm/smooth-scroll@12.1.5/dist/js/smooth-scroll.min.js"></script>

    <script>
      // Used by the main.js script below.
      docsConfigRoot = '/docs/apollo-server/';
    </script>
    <script src="../script/main.js"></script>

    
      <script type="text/javascript" src="//cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.js"></script>
    
    <script type="text/javascript" src="//cdn.jsdelivr.net/fastclick/1.0.6/fastclick.min.js"></script>

    <script>
      // nectar ninja
      (function(){
        var handle = '@meteorjs';
        var a = document.createElement('script');
        var m = document.getElementsByTagName('script')[0];
        a.async = 1;
        a.src = 'https://nectar.ninja/api/v1/' + handle.slice(1);
        m.parentNode.insertBefore(a, m);
      })();
    </script>

    

    
      <script>
        
        var analytics;

        <!-- Segment.io -->
        !function(){var analytics=window.analytics=window.analytics||[];if(!analytics.initialize)if(analytics.invoked)window.console&&console.error&&console.error("Segment snippet included twice.");else{analytics.invoked=!0;analytics.methods=["trackSubmit","trackClick","trackLink","trackForm","pageview","identify","reset","group","track","ready","alias","debug","page","once","off","on"];analytics.factory=function(t){return function(){var e=Array.prototype.slice.call(arguments);e.unshift(t);analytics.push(e);return analytics}};for(var t=0;t<analytics.methods.length;t++){var e=analytics.methods[t];analytics[e]=analytics.factory(e)}analytics.load=function(t,e){var n=document.createElement("script");n.type="text/javascript";n.async=!0;n.src=("https:"===document.location.protocol?"https://":"http://")+"cdn.segment.com/analytics.js/v1/"+t+"/analytics.min.js";var o=document.getElementsByTagName("script")[0];o.parentNode.insertBefore(n,o);analytics._loadOptions=e};analytics.SNIPPET_VERSION="4.1.0";
        analytics.load("wgrIo8Bul0Ujl8USETG3DB6hONdy4kTg");
        analytics.page();
        }}();
      </script>
    

    // search box
    
      <script>
        ['desktop'].forEach(function(type) {
          var search = docsearch({
            apiKey: '768e823959d35bbd51e4b2439be13fb7',
            
            
            indexName: 'apollodata',
            inputSelector: '#' + type + '-search-input',
            autocompleteOptions: {
              dropdownMenuContainer: '.wrapper-' + type + '-search-results',
              debug: true
            },
            algoliaOptions: {
              hitsPerPage: 20
            }
          }).autocomplete;

          var sidebar = document.querySelector('.sidebar-content');
          search.on('autocomplete:opened', function() {
            sidebar.classList.add('searching');
          });
          search.on('autocomplete:closed', function() {
            sidebar.classList.remove('searching');
          });
          search.on('autocomplete:updated', function() {
            if (search.val() === '') {
              search.autocomplete.close();
            }
          });
        });
      </script>
    

    

    <script src="//cdnjs.cloudflare.com/ajax/libs/cookieconsent2/3.0.3/cookieconsent.min.js"></script>
    <script>
      window.addEventListener('load', function () {
        window.cookieconsent.initialise({
          palette: {
            popup: {
              background: '#555',
            },
            button: {
              text: '#333',
              background: '#CCC',
            },
          },
        })
      });
    </script>
  </body>
</html>
